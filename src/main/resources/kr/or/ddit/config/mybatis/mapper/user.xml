<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

	<!-- 사용자 리스트 조회 -->
  <select id="userList" resultType="userVo">
    SELECT * 
    FROM	USERS
    ORDER BY USERID
  </select>
  <!--  특정 사용자 조회 -->
  <select id="getUser" parameterType="String" resultType="userVo">
  	SELECT	USERID
  		  , NAME
  		  , ALIAS
  	FROM	USERS
  	WHERE 	USERID = #{userId}
  </select>
  
  
  <!-- 사용자 페이지 리스트 조회 -->
  <!-- paveVO int page, int pageSize -->
  <select id="userPagingList" parameterType="pageVO" resultType="userVo">

	SELECT *
 	FROM
		(SELECT A.*, ROWNUM RN
		 FROM
			(SELECT A.* 
 			 FROM    USERS A
 			 ORDER BY USERID) A )
	WHERE RN &gt;= (#{page}-1)*#{pageSize}+1 AND RN &lt;= #{page}*#{pageSize}

<!--   	<![CDATA[ -->
<!--   	SELECT * -->
<!--  	FROM -->
<!-- 		(SELECT A.*, ROWNUM RN -->
<!-- 		 FROM -->
<!-- 			(SELECT A.*  -->
<!--  			 FROM    USERS A -->
<!--  			 ORDER BY USERID) A ) -->
<!-- 	WHERE RN >= (#{page}-1) * #{pageSize}+1 AND RN <= #{page} * #{pageSize} -->
<!-- 	]]> -->
  </select>
  
  
	<!-- 사용자 전체 수 조회 -->
	<select id="usersCnt" resultType="int">
		SELECT COUNT(*)
		FROM USERS
	</select>
</mapper>